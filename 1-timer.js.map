{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate = Date.now();\nlet deltaTime = {};\nlet idInterval = null;\n\nconst refs = {\n  input: document.querySelector('#datetime-picker'),\n  button: document.querySelector('[data-start]'),\n};\nrefs.button.setAttribute('disabled', ' ');\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (isFutureDate(selectedDates[0])) {\n      userSelectedDate = selectedDates[0];\n    }\n  },\n};\nflatpickr(refs.input, options);\n\nfunction isFutureDate(userSelectedDate) {\n  if (userSelectedDate - Date.now() < 0 && idInterval === null) {\n    iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message: 'Please choose a date in the future',\n    });\n    refs.button.setAttribute('disabled', ' ');\n    refs.input.removeAttribute('disabled', ' ');\n    return false;\n  } else {\n    refs.button.removeAttribute('disabled');\n    refs.input.setAttribute('disabled', ' ');\n    return true;\n  }\n}\n\nrefs.button.addEventListener('click', () => {\n  if (isFutureDate(userSelectedDate)) {\n    refs.button.setAttribute('disabled', ' ');\n    countdown.start();\n  }\n});\n\nconst countdown = {\n  start() {\n    idInterval = setInterval(() => {\n      deltaTime = convertMs(userSelectedDate - Date.now());\n      if (deltaTime.days < 0) {\n        return this.stop();\n      }\n      updateTimerFace(deltaTime);\n    }, 1000);\n  },\n  stop() {\n    clearInterval(idInterval);\n    idInterval = null;\n    refs.input.removeAttribute('disabled', ' ');\n  },\n};\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = addLeadingZero(Math.floor(ms / day));\n  // Remaining hours\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = addLeadingZero(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  );\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction updateTimerFace({ days, hours, minutes, seconds }) {\n  document.querySelector('[data-days]').textContent = deltaTime.days;\n  document.querySelector('[data-hours]').textContent = deltaTime.hours;\n  document.querySelector('[data-minutes]').textContent = deltaTime.minutes;\n  document.querySelector('[data-seconds]').textContent = deltaTime.seconds;\n}\n\n// class Countdown {\n//   constructor(onTick) {\n//     let idInterval = null;\n//     this.onTick = onTick;\n//   }\n\n//   init() {\n//     const deltaTime = this.convertMs(userSelectedDate - Date.now());\n//     this.onTick(deltaTime);\n//   }\n\n//   start() {\n//     this.idInterval = setInterval(() => {\n//       this.deltaTime = this.convertMs(userSelectedDate - Date.now());\n//       if (deltaTime.days < 0) {\n//         return this.stop();\n//       }\n//       updateTimerFace(this.deltaTime);\n//     }, 1000);\n//   }\n//   stop() {\n//     clearInterval(this.idInterval);\n//     idInterval = null;\n//     refs.input.removeAttribute('disabled', ' ');\n//   }\n\n//   // Helpers\n//   convertMs(ms) {\n//     // Number of milliseconds per unit of time\n//     const second = 1000;\n//     const minute = second * 60;\n//     const hour = minute * 60;\n//     const day = hour * 24;\n\n//     // Remaining days\n//     const days = this.addLeadingZero(Math.floor(ms / day));\n//     // Remaining hours\n//     const hours = this.addLeadingZero(Math.floor((ms % day) / hour));\n//     // Remaining minutes\n//     const minutes = this.addLeadingZero(\n//       Math.floor(((ms % day) % hour) / minute)\n//     );\n//     // Remaining seconds\n//     const seconds = this.addLeadingZero(\n//       Math.floor((((ms % day) % hour) % minute) / second)\n//     );\n\n//     return { days, hours, minutes, seconds };\n//   }\n//   addLeadingZero(value) {\n//     return String(value).padStart(2, '0');\n//   }\n// }\n\n// const timerInstance = new Countdown({ onTick: updateTimerFace });\n"],"names":["userSelectedDate","deltaTime","idInterval","refs","options","selectedDates","isFutureDate","flatpickr","iziToast","countdown","convertMs","updateTimerFace","ms","days","addLeadingZero","hours","minutes","seconds","value"],"mappings":"iyBAKA,IAAIA,EAAmB,KAAK,MACxBC,EAAY,CAAA,EACZC,EAAa,KAEjB,MAAMC,EAAO,CACX,MAAO,SAAS,cAAc,kBAAkB,EAChD,OAAQ,SAAS,cAAc,cAAc,CAC/C,EACAA,EAAK,OAAO,aAAa,WAAY,GAAG,EAExC,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjBC,EAAaD,EAAc,CAAC,CAAC,IAC/BL,EAAmBK,EAAc,CAAC,EAErC,CACH,EACAE,EAAUJ,EAAK,MAAOC,CAAO,EAE7B,SAASE,EAAaN,EAAkB,CACtC,OAAIA,EAAmB,KAAK,IAAK,EAAG,GAAKE,IAAe,MACtDM,EAAS,MAAM,CACb,MAAO,QACP,SAAU,WACV,QAAS,oCACf,CAAK,EACDL,EAAK,OAAO,aAAa,WAAY,GAAG,EACxCA,EAAK,MAAM,gBAAgB,WAAY,GAAG,EACnC,KAEPA,EAAK,OAAO,gBAAgB,UAAU,EACtCA,EAAK,MAAM,aAAa,WAAY,GAAG,EAChC,GAEX,CAEAA,EAAK,OAAO,iBAAiB,QAAS,IAAM,CACtCG,EAAaN,CAAgB,IAC/BG,EAAK,OAAO,aAAa,WAAY,GAAG,EACxCM,EAAU,MAAK,EAEnB,CAAC,EAED,MAAMA,EAAY,CAChB,OAAQ,CACNP,EAAa,YAAY,IAAM,CAE7B,GADAD,EAAYS,EAAUV,EAAmB,KAAK,IAAK,CAAA,EAC/CC,EAAU,KAAO,EACnB,OAAO,KAAK,OAEdU,EAAgBV,CAAS,CAC1B,EAAE,GAAI,CACR,EACD,MAAO,CACL,cAAcC,CAAU,EACxBA,EAAa,KACbC,EAAK,MAAM,gBAAgB,WAAY,GAAG,CAC3C,CACH,EAEA,SAASO,EAAUE,EAAI,CAQrB,MAAMC,EAAOC,EAAe,KAAK,MAAMF,EAAK,KAAG,CAAC,EAE1CG,EAAQD,EAAe,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EAEpDI,EAAUF,EAAe,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjEK,EAAUH,EACd,KAAK,MAASF,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EAEE,MAAO,CAAE,KAAAC,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASH,EAAeI,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASP,EAAgB,CAAE,KAAAE,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC1D,SAAS,cAAc,aAAa,EAAE,YAAchB,EAAU,KAC9D,SAAS,cAAc,cAAc,EAAE,YAAcA,EAAU,MAC/D,SAAS,cAAc,gBAAgB,EAAE,YAAcA,EAAU,QACjE,SAAS,cAAc,gBAAgB,EAAE,YAAcA,EAAU,OACnE"}